# vim

## 普通模式下

### 字符操作

- 删除

	- dnw

		- n为相应的数字

			- 删除n个单词

	- dw/daw

		- delete a word

			- 删除一个单词

	- 输入N<command>

		- 比如10x

			- 删除10个连续字符

		- 3dd

			- 删除3行文本

	- dd

		- 剪切一行，可以粘贴的

	- .

		- 重复输入上次的的命令

	- x

		- 删除一个字符

	- dt$

		- 从当前位置开始，删除到下一个$符号出现为止；

	- d$

		- 从当前位置开始删除到本行末尾

	- dt2,

		- 删除直到第二个逗号出现的地方

	- 动词 + 范围限定词 + [选项] +位置标记词

- 复制及粘贴文本

	- 复制

		- y

			- 复制

		- yy

			- 复制游标所在的整行（3yy表示复制3行）

		- y^ 

			- 复制至行首，或y0。不含光标所在处字符。

		- y$ 

			- 复制至行尾。含光标所在处字符。

		- yw 

			- 复制一个单词。

		- y2w 

			- 复制两个单词。

		- yG 

			- 复制至文本末。

		- y1G 

			- 复制至文本开头。

	- 粘贴

		- p

			- 粘贴

		- p(小写)

			- 代表粘贴至光标后（下）

		- P(大写)

			- 代表粘贴至光标前（上）

		- ddp

			- 实现了快速交换光标所在行与它下面的行

### 跳转

- 行间跳转

	- nG(n Shift+g)

		-  Shift+g)	游标移动到第 n 行(如果默认没有显示行号，请先进入命令模式，输入:set nu以显示行号)

	- gg

		- 游标移动到到第一行

	- G(Shift+g)

		- 到最后一行

	- Ctrl+o 

		- 快速回到上一次(跳转前)光标所在位置,

- 行内跳转

	- w

		- 到下一个单词的开头

	- e

		- 到当前单词的结尾

	- b

		- 到前一个单词的开头

	- ge

		- 到前一个单词的结尾

	- 0或^	

		- 到行头

	- $	

		- 到行尾

	- f<字母>	

		- 向后搜索<字母>并跳转到第一个匹配的位置(非常实用)

	- F<字母>	

		- 向前搜索<字母>并跳转到第一个匹配的位置

	- t<字母>	

		- 向后搜索<字母>并跳转到第一个匹配位置之前的一个字母(不常用)

	- T<字母>	

		- 向前搜索<字母>并跳转到第一个匹配位置之后的一个字母(不常用)

### 替换和撤销(Undo)

- r+<待替换字母>	

	- 将游标所在字母替换为指定字母

- R	

	- 连续替换，直到按下Esc

- cc	

	- 替换整行，即删除游标所在行，并进入插入模式，输入新字符串，输入完按ESC回到普通模式

- cw	

	- 替换一个单词，即删除一个单词，并进入插入模式，输入完按ESC回到普通模式（实用）

- C(大写)	

	- 替换游标以后至行末，输入完按ESC回到普通模式

- ~	

	- 反转游标所在字母大小写

- u{n}	

	- 撤销一次或n次操作

- U(大写)	

	- 撤销当前行的所有修改

- Ctrl+r

	- 	redo，即撤销undo的操作

### 缩进操作

- 15G

	- 跳转到15行

- >> 

	- 整行将向右缩进（使用，用于格式化代码超爽）

- << 

	- 整行向左回退

- :

	- 进入命令行模式下对shiftwidth值进行设置可以控制缩进和回退的字符数

## 命令模式(输入”:“进入)

### shiftwidth

- 指上一节>>命令产生的缩进（可以简写成sw）

### :set shiftwidth?

- 获取目前的设定值

### :set shiftwidth=10

- 设置缩进为10个字符

### :ce(center)

- 使本行内容居中

### :ri(right)

- 使本行文本靠右

### :le(left)

- 使本行内容靠左

## 快速查找(输入”/“或"?"进入)

### 键入需要查找的字符串 按回车后就会进行查找

### ？ 与/ 功能相同，只不过 ？ 是向上而 / 是向下查找。

### 进入查找之后，输入n 和 N 可以继续查找。 n是查找下一个内容,N查找上一个内容。

### 普通模式下输入/icmp然后回车即可查找字符串 icmp

- 输入继续查找下一个 icmp

### 普通模式下输入？tcp向上查找字符串 tcp

### 普通模式下输入N查找上一个出现的 tcp

### 命令行模式下输入 noh 然后回车即可取消搜索

## 高级查找

### 普通模式下输入\*寻找游标所在处的单词

### 普通模式下输入\#同上，但 \# 是向前（上）找，\*则是向后（下）找

### 普通模式下输入g\*同\* ，但部分符合该单词即可

### 普通模式下输入g\#同\# ，但部分符合该单词即可

### 以上查找n, N 的继续查找命令依然可以用

## 高级功能

### 多文件编辑

- $ vim 1.txt 2.txt

	- 默认进入1.txt文件的编辑界面
	- 命令行模式下输入 :n 编辑 2.txt 文件，可以加 ! 即 :n! 强制切换，之前一个文件的输入没有保存，仅仅切换到另一个文件
	- 命令行模式下输入 :N 编辑 1.txt 文件，可以加 ! 即 :N! 强制切换，之前文件内的输入没有保存，仅仅是切换到另一个文件

- 进入vim后打开新文件

	- :e 3.txt 

		- 打开新文件3.txt

	- :e#

		-  回到前一个文件

	- :ls

		- 列出以前编辑过的文档

	- :b 2.txt（或者编号）

		- 直接进入文件2.txt编辑

	- :bd 2.txt（或者编号）

		- 可以删除以前编辑过的列表中的文件项目

	- :e! 4.txt

		- 新打开文件4.txt，放弃正在编辑的文件

	- :f 

		- 显示正在编辑的文件名

	- :f new.txt

		- 改变正在编辑的文件名字为new.txt

- 恢复文件

	- :ewcover 1.txt

		- 如果因为断电等原因造成文档没有保存，可以采用恢复方式，vim -r进入文档后，输入命令

### 可视模式

- v

	- 进入字符选择模式，就可以移动光标，光标走过的地方就会选取

		- 再次按下v后取消

-  Shift+v（小写）

	- 进入行选择

### 视窗操作

- :new

	- 打开一新的 vim 视窗，并进入视窗编辑一个新文件（普通模式下输入 Ctrl+w 也可以）

- :sp 1.txt 

	- 打开新的水平分屏视窗来编辑1.txt

- :vsp 2.txt 

	- 打开新的垂直分屏视窗来编辑2.txt

- Ctrl+w s 

	- 将当前窗口分割成两个水平的窗口

- Ctrl+w v 

	- 将当前窗口分割成两个垂直的窗口

- Ctrl+w q 

	- 即 :q 结束分割出来的视窗。如果在新视窗中有输入需要使用强制符！即:q!

		- 写入的东西在:q!后，不会保存

- Ctrl+w o 

	- 打开一个视窗并且隐藏之前的所有视窗

- Ctrl+w j 

	- 移至下面视窗

- Ctrl+w k 

	- 移至上面视窗

- Ctrl+w h 

	- 移至左边视窗

- Ctrl+w l 

	- 移至右边视窗

- Ctrl+w J 

	- 将当前视窗移至下面

- Ctrl+w K 

	- 将当前视窗移至上面

- Ctrl+w H 

	- 将当前视窗移至左边

- Ctrl+w L 

	- 将当前视窗移至右边

- Ctrl+w - 

	- 减小视窗的高度

- Ctrl+w + 

	- 增加视窗的高度

- Ctrl+w

	- 使用非chrome浏览器可以使用Ctrl+w进行视窗间的跳转

### 创建加密文档

- vim -x file1

	- 输入您的密码 确认密码 这样在下一次打开时，vim就会要求你输入密码

### 在vim执行外部命令

- 在命令行模式中输入!可以执行外部的shell命令

	- :!ls 

		- 用于显示当前目录的内容

	- :!rm FILENAME

		- 用于删除名为 FILENAME 的文件

	- :w FILENAME

		- 可将当前 VIM 中正在编辑的文件另存为 FILENAME 文件

### 帮助系统

- F1

	- 打开vim自己预设的帮助文档

- :h shiftwidth 

	- 打开名为shiftwidth的帮助文件

- :ver 

	- 显示版本及参数

### 功能设定

- :set nu

	- 显示行数，但是瑞出后不会保存

		- 要永久保存配置需要修改vim配置文件。 vim的配置文件~/.vimrc(实验楼环境中配置文件在/etc/vim/vimrc)，可以打开文件进行修改，不过务必小心不要影响vim正常使用

- :set/:se

	- 显示所有修改过的配置

- :set all

	- 命令显示选项和设置的列表

- :set option?

	- 显示option的设定值

- :set nooption

	- 取消当前设定值

- :set autoindent(ai) 

	- 设置自动缩进

- :set autowrite(aw)

	- 设置自动存档，默认未打开

- :set background=dark/light

	- 设置背景风格

- :set backup(bk)

	- 设置自动备份，默认未打开

- : set cindent(cin)

	- 设置C语言风格缩进

- 更多详细参数请参考vim手册

